apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "onix-rabbitmq.fullname" . }}-{{ .Values.component }}-config
  labels:
    {{- include "onix-rabbitmq.labels" . | nindent 4 }}
    component: {{ .Values.component }}
data:
  adapter.yaml: |
{{ .Values.config.adapter | indent 4 }}
  {{- if eq .Values.component "bap" }}
  bapTxnCaller-routing.yaml: |
{{ .Values.config.routing.caller | indent 4 }}
  bapTxnReciever-routing.yaml: |
{{ .Values.config.routing.receiver | indent 4 }}
  {{- else }}
  bppTxnCaller-routing.yaml: |
{{ .Values.config.routing.caller | indent 4 }}
  bppTxnReciever-routing.yaml: |
{{ .Values.config.routing.receiver | indent 4 }}
  {{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "onix-rabbitmq.fullname" . }}-schemas
  labels:
    {{- include "onix-rabbitmq.labels" . | nindent 4 }}
data:
  # Note: In production, you may want to use a PersistentVolume or initContainer
  # to populate schemas from your schemas directory
  # For now, this is a placeholder - you'll need to populate it with actual schema files
  .gitkeep: ""

