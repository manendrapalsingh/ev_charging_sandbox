# BPP Caller Routing Configuration
# Phase 1: Consumes on_discover from RabbitMQ (mock-bpp-rabbitmq producer) -> sends HTTP to CDS
# Phase 2+: Consumes other responses from RabbitMQ (mock-bpp-rabbitmq producer) -> sends HTTP to BAP-ONIX plugin -> publishes to RabbitMQ -> mock-bap-rabbitmq (consumer)

routingRules:
  # Phase 1: on_discover response from RabbitMQ -> sends HTTP to CDS
  # Consumes from RabbitMQ queue (bpp.on_discover routing key) and forwards to CDS
  - domain: beckn.one:deg:ev-charging
    version: "2.0.0"
    targetType: url
    target:
      url: http://mock-cds:8082/csd
      excludeAction: false
    endpoints:
      - on_discover

  # Phase 2+: Other responses from RabbitMQ -> sends HTTP to BAP-ONIX plugin -> publishes to RabbitMQ -> mock-bap-rabbitmq (consumer)
  # Consumes from RabbitMQ queue (bpp.on_select, etc.) and forwards to BAP plugin using bap_uri from context
  - domain: beckn.one:deg:ev-charging
    version: "2.0.0"
    targetType: bap
    target: {}
    endpoints:
      - on_select
      - on_init
      - on_confirm
      - on_status
      - on_track
      - on_cancel
      - on_update
      - on_rating
      - on_support

